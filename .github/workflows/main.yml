name: maven spring boot ci

on:
 push:
   branches: ["main"]
jobs:
  build:
     runs-on: "ubuntu-latest"

     steps:
        - name: setup checkout
          uses: actions/checkout@v3
        - name: step 2:setup jdk
          uses: actions/setup-java@v4
          with:
           java-version: '17'
           distribution: 'zulu'
        - name: package application
          run: |
              mvn -B package --file pom.xml
              mkdir staging && cp target/*.jar staging
          
        - name: locate jar
          run: |
               cd target
               ls -a
        - name: upload artifact
          uses: actions/upload-artifact@v3
          with:
           name: myjar
           path: staging
        - name: test reports
          uses: phoenix-actions/test-reporting@v12
          with:
           name: Maven Tests
           path: target/surefire-reports/*.xml
           reporter: java-junit
           fail-on-error: true
